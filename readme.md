# 웹소켓 게임 만들기

DINO_RUN

---

### 필수 기능

1. 스테이지 구분
   획득한 점수에 따라 스테이지가 증가하도록 구현했습니다.
   클라이언트에서는 stage.json 을 참고하여 update 에서 진행되고
   서버는 stage.handler 에서 검증합니다.

2. 스테이지에 따른 점수 획득 구분
   과제 발제내용을 참고하여 구현했습니다.
   stage.json의 scorePerSecond 을 참고하여 점수를 획득합니다.

3. 스테이지에 따라 아이템이 생성
   item_unlock을 참고하여 스테이지 마다 등장하는 아이템에 차이가 있도록 구현했습니다.
   게임의 스테이지 증가는 Score 에서 관리하고 있기 때문에,
   이 틀을 깨지 않고 ItemController. createItem 에 있는
   score 의 정보를 인자로 받아와서 참고하는 식으로 구현했습니다.

4. 아이템 획득 시 점수 획득
   Score.js -> getItem 을 수정하여 아이템 획득 시, 점수를 획득하도록 했습니다.
   getItem.handler 를 통해 검증과 리턴이 이루어지고,
   아이템 획득 내용에 대한 데이터를 별도로 다루기 위해
   item.model.js 또한 추가했습니다. 위 과정에서 만들어지는 items[uuid]에 아이템 획득정보가 쌓이게 됩니다.

++ 아이템 획득 간격에 대한 검증
아이템 획득 시, 직전 아이템을 획득한 시간과 차이가 지나치게 짧은 경우, status:'fail' 을 리턴하도록 했습니다.
이에 따라, ItemController => INTERVAL_MIN = 1000 아이템 생성 간격의 최소치를 수정하였습니다.

5. 아이템 별 획득 점수 구분
   item.json 테이블을 참고하여 아이템마다 다른 score 획득 하도록 구현했습니다.

아이템 종류 별 획득 스테이지 검증을 진행할 떄,
아이템의 생성 시간과 획득 시간에 차이가 있기 때문에
그 사이 스테이지가 넘어가버리면 넘어간 스테이지 기준으로 검증을 하게 되기 때문에,
아이템이 생성될 당시에 StageId 를 Item 자체가 가지고 있도록 하였습니다.

### 도전 기능

도전중...
